
\chapter{Route planning methods}

\section{Formal problem description}

\iffalse
Differential or non-holonomic constraints can be described by a forward propagation function $f : \mathcal{X} \times \mathcal{U} \to \dot{\mathcal{X}} $, where $\mathcal{X}$ and $\mathcal{U}$ represent the state and control spaces, respectively \parencite{lee2017}.

By feasible it should consider
\begin{itemize}
  \item Non-holonomic or inequality constraints caused by avoiding collision with land.
  \item Differential constraints caused by the kinodynamic system.
\end{itemize}

Closed-loop planning.

Non-linear dynamics.

Single query.

Kinodynamic planning.


not holonomic robots, kinodynamic

\fi

The route planning problem for ships, as motivated in the introduction, is formalized as an extention to \parencite{webb2013}. Given a start state $\textbf{x}_{start} \in \mathcal{X}_{free}$ and a goal region $\mathcal{X}_{goal} \in \mathcal{X}_{free}$, find the feasible and optimal trajectory $\pi^*_{feasible}$ between $\textbf{x}_{start}$ and $\mathcal{X}_{goal}$ that minimizes a cost $c(\pi)$. That is

\begin{subequations}
\begin{align}
\pi^*_{feasible} &= \underset{\pi}{\text{argmin}} \ c(\pi) \\
\text{s.}& \text{ t.} \nonumber \\
\textbf{x}(0) &= \textbf{x}_{start} \\
\textbf{x}(\tau) &\in \mathcal{X}_{goal} \\
\textbf{x}(t) &\in \mathcal{X}_{free} \ \forall t \in [0,\tau] \\
\textbf{u}(t) &\in \mathcal{U}_{free} \ \forall t \in [0,\tau]  \\
\dot{\textbf{x}}(t) &= f(\textbf{x}(t), \textbf{u}(t)) \ \forall t \in [0,\tau] 
\end{align}
\end{subequations}






\section{Classification}
Grid-based search, Interval-based search, Geometric algorithms, Reward-based algorithms, Artificial potential fields, Sampling-based algorithms

\section{Properties}






\begin{definition}[Completness \parencite{lavalle2006}]
A planner is \textbf{complete} if it guarantees a feasible solution in finite time or correctly reports that there is none. If a planner is complete under the condition that the resolution is fine enough, e.g.\ fine enough underlying grid, it is \textbf{resolution complete}. Similarily, if the probability that a planner successfully finds a feasible solution, if one exists, asymptotically approaches one as more work is performed, it is \textbf{probabilistic complete}. \textbf{Incomplete} planners do not guarantee that they produce a feasible solution even if one exists.
\end{definition}

\begin{definition}[Optimality]
A planner is \textbf{optimal} if it guarantees to find the global optimum in finite time. A planner is \textbf{asymptotic optimal} if the cost of the solution converges to the global optimum as more work is performed. A planner is \textbf{}.
\end{definition}

\begin{definition}[Monotone convergence]
\end{definition}

\begin{definition}[System]
  A \textbf{holonomic system} is either not constrained by any constraint or constrained only by geometric constraints.  A \textbf{non-holonomic system} is a system whose state depends on the path taken in order to achieve it, typically characterized by differential constraints.
\end{definition}



\section{Rapidly-exploring random three (\gls{rrt})}

\section{RRT*}

The RRT* algorithm was introduced by \parencite{sertac2011} as an extention to RRT which is provably asymptotically optimal, i.e.\ the cost of the returned solution converges almost surely to the optimum. 


\section{Kinodynamic RRT*}

A RRT* variation that considers linear dynamics was introduced by \parencite{webb2013}, which still guarantees asymptotical optimality. Asymptotical optimality is even shown to be guaranteed for linearized nonlinear dynamics. The method is outlined in \autoref{alg:rrt_star_kinodynamic}.

\begin{algorithm}
\caption{Kinodynamic RRT*}\label{alg:rrt_star_kinodynamic}
\begin{algorithmic}[1]
\Procedure{KinodynamicRRT*$(\textbf{x}_ {start} \in \mathcal{X}_{free}, \textbf{x}_ {goal} \in \mathcal{X}_{goal}$)}{}
\State $\mathcal{T} \gets \mathtt{INIT\_TREE}(\textbf{x}_ {start})$
\For {$i \in N$}
\State $\textbf{x}_ {i} \gets \mathtt{SAMPLE\_RANDOM(\mathcal{X}_{free} )}$
\State $\textbf{x} \gets \text{argmin} \{\textbf{x} \in \mathcal{T} \ |\ c^*(\textbf{x}, \textbf{x}_i) < r \land \mathtt{COLLISION\_FREE}(\pi^*(\textbf{x},\textbf{x}_i))\}  (\mathtt{cost}(\textbf{x}) + c^*(\textbf{x},\textbf{x}_i))$
\State $\mathtt{parent}(\textbf{x}_i) \gets \textbf{x}$
\State $\mathtt{cost}(\textbf{x}_i) \gets \mathtt{cost}(\textbf{x}) + c^*(\textbf{x},\textbf{x}_i)$
\ForAll {$\{ \textbf{x} \in \mathcal{T} \cup \{\textbf{x}_{goal}\} \ |\  c^*(\textbf{x}_i, \textbf{x}) < r \land \mathtt{cost}(\textbf{x}_i) + c^*(\textbf{x}_i, \textbf{x}) < \mathtt{cost}(\textbf{x}) \land \mathtt{COLLISION\_FREE}(\pi^*(\textbf{x}_i, \textbf{x}))  \}$}
\State $\mathtt{parent}(\textbf{x}) \gets \textbf{x}_i$
\State $\mathtt{cost}(\textbf{x}) \gets \mathtt{cost}(\textbf{x}_i) + c^*(\textbf{x}_i,\textbf{x})$
\EndFor
\State $\mathcal{T} \gets \mathcal{T} \cup \{ \textbf{x}_i \}$
\EndFor
\EndProcedure
\end{algorithmic}
\end{algorithm}

The tree $\mathcal{T}$ is represented as a set of states. Each state $\textbf{x}$ in the tree has two attributes: a pointer $\mathtt{parent}(\textbf{x})$ to its parent state in the tree, and a number $\mathtt{cost}(\textbf{x})$ which stores the cost of the trajectory in the tree between the start state $\textbf{x}_{start}$ and $\textbf{x}$

\begin{equation}
  \mathtt{COLLISION\_FREE}(\pi(\textbf{x}(),\textbf{u}(),\tau) = \forall \{ t \in [0,\tau] \} \ (\textbf{x}(t) \in \mathcal{X}_{free} \land \textbf{u}(t) \in \mathcal{U}_{free})
\end{equation}
 




\section{A*}
\section{Theta*}
\section{Voronoi diagram (\gls{vd})}
\section{Cell decomposition (\gls{cd})}
\section{Visibility graph (\gls{vg})}
\section{Probabilistic roadmap (\gls{pr})}
\section{Pseudospectral (\gls{ps})}
\section{Pipeline method}
A* --> RRT --> PS

